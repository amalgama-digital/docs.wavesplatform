# Работа с кошельком ноды

Каждая нода имеет подключенный кошелек, обеспечивающий:

* возможность генерировать блоки;
* возможность подписывать транзакции.

Нода может иметь один кошелек с одной секретной (seed) фразой.

В данной статье мы рассмотрим следующие сценарии работы с кошельком:

* [Создание нового кошелька с нуля](#new)
* [Создание кошелька с использованием имеющейся секретной фразы](#existing-seed)
* [Использование имеющегося кошелька](#existing-wallet)
* [Обновление настороек кошелька](#wallet-settings)
* [Cмена аккаунта у ноды](#re-create)

## Создание нового кошелька с нуля <a id="new"></a>

При запуске нода автоматически создаст кошелек в случае, если основная папка приложения, указанная в секции `wallet` [файла конфигурации](/ru/waves-node/node-configuration), не содержит файл `wallet.dat`.

В процессе создания кошелька нода:

* сгенерирует секретную фразу;
* выведет ее в STDOUT;
* запросит новый пароль, при помощи которого секретная фраза будет зашифрована.

> Секретную фразу, выведенную в STDOUT, рекомендуется сохранить в надежном месте. Если вы забудете ее, то не сможете восстановить в изначальном виде. Восстановить возможно будет только хеш секретной фразы: его можно получить с помощью метода `GET /addresses/seed/{address}` [Node REST API](/ru/waves-node/node-api/). Хеш можно использовать для [получения закрытого ключа аккаунта](/en/blockchain/waves-protocol/cryptographic-practical-details).

Зашифрованная секретная фраза будет записана в `wallet.dat`. Чтобы не вводить пароль при каждом запуске ноды, рекомендуется указать его в секции `wallet` файла конфигурации.

## Cоздание кошелька с использованием имеющейся секретной фразы <a id="existing-seed"></a>

Если у вас уже есть секретная фраза, укажите в секции `wallet` файла `/etc/waves/waves.conf`:

* секретную фразу в кодировке base58.
* пароль.

Если вы утратили пароль, то при запуске нода запросит новый пароль.

Для кодирования текста в кодировку base58 существует масса онлайн-конвертеров. С точки зрения безопасности разумным представляется использовать RideREPL [Waves IDE](https://waves-ide.com/). Чтобы закодировать секретную фразу в base58, введите в консоль

```
"your-seed-phrase".toBytes().toBase58String()
```

При необходимости измените путь к папке, в которой будет размещен сгенерированный `wallet.dat`. Пример секции `wallet` с рассмотренными настройками:

```
wallet {
    file = ${waves.directory}"/wallet/wallet.dat"
    password = "some-string-as-password"
    seed = "base58-encoded-seed"
}
```

В результате в указанной папке на основе заданной секретной фразы будет сгенерирован `wallet.dat`.

[Пример конфигурационного файла ноды](https://github.com/wavesplatform/Waves/blob/master/node/src/main/resources/application.conf)

## Использование имеющегося кошелька <a id="existing-wallet"></a>

Если у вас имеется созданный ранее файл `wallet.dat`, достаточно положить его папку, указанную в секции `wallet`, и указать пароль к нему в параметре `password`. Никаких дополнительных действий не требуется.

## Обновление настороек кошелька <a id="wallet-settings"></a>

Если вы хотите запустить ноду с другим кошельком, используйте один из следующих способов:

* Замените `wallet.dat` на файл, содержащий секретную фразу другого кошелька.

или

* Удалите/переместите файл `wallet.dat` из директории `/wallet`. Обновите секретную фразу в файле конфигурации ноды.

Нода начнет работать с новым кошельком после перезапуска.

## Смена аккаунта у ноды <a id="re-create"></a>

При необходимости поменять аккаунт у ноды, прежде всего потребуется удалить старый wallet.dat. После этого вы можете:

* [создать новый кошелек с нуля](#new);
* [создать кошелек с использованием имеющейся секретной фразы](#existing-seed);
* [использовать другой кошелек](#existing-wallet).
