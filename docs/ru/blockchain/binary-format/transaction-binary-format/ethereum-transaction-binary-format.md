# Бинарный формат транзакции в формате Ethereum

> Поддержка транзакций в формате Ethereum добавлена в версии ноды 1.4.0. Возможность использовать эту транзакцию включается после активации фичи №&nbsp;17 “Ride V6”. Версии 1.4.x в настоящее время доступны только для [Stagenet](/ru/blockchain/blockchain-network/).

Нода Waves поддерживает транзакции в формате Ethereum и интерпретирует их как вызов dApp-скрипта или перевод токена, в зависимости от содержания. [Подробнее о поддержке Ethereum-транзакций](/ru/keep-in-touch/metamask)

Ethereum-транзакции не относятся к типизированным транзакциям WAVES.

```protobuf
message SignedTransaction {
    Transaction transaction = 1;
    oneof transaction {
        Transaction waves_transaction = 1;
        bytes ethereum_transaction = 3;
    }
   repeated bytes proofs = 2;
}
```

Поле `ethereum_transaction` содержит байты Ethereum-транзакции целиком, включая подпись ECDSA (значения `v`, `r`, `s`). Массив `proofs` в случае Ethereum-транзакции пустой.

## Интерпретация полей

* `gasLimit` рассматривается как комиссия. `gasPrice` игнорируется. Комиссия возможна только в WAVES.
* `nonce` рассматривается как `timestamp`.
* Если поле `value` непустое, транзакция интерпретируется как перевод WAVES. В этом случае поле `data` должно быть пустым.
* Если поле `data` содержит вызов метода `transfer` смарт-контракта ERC20, а поле `to` содержит первые 20 байт идентификатора пользовательского токена, транзакция интерпретируется как перевод этого токена.

   Первые 20 байт идентификатора однозначно определяют токен, поскольку на блокчейне нет токенов, у которых они совпадают.

* В остальных случаях транзакция интерпретируется как вызова dApp-скрипта. Последний аргумент вызываемой функции должен быть массивом; он рассматривается как список приложенных к вызову платежей.
